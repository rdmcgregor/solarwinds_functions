<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.9
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="puppet_function_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_function_list_link"
        href="puppet_function_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-Solarwinds-2FPuppet+Custom+Function">Solarwinds/Puppet Custom Function</h1>

<p>This is a Puppet custom function for adding nodes to Solarwinds
automagically</p>

<p>Every puppet run the function will reach out to your Solarwinds instance
and ask if it is already being monitored. If it finds out that it does not
exist it will add itself.</p>

<p>This is a hybrid version that supports both SNMP v2 and v3. Thanks to
powellnathanj for the SNMP v2 version <a
href="https://github.com/powellnathanj/solarwinds_functions">github.com/powellnathanj/solarwinds_functions</a>
Thanks to ggrosnick for the SNMP v3 version <a
href="https://github.com/ggrosnick/solarwinds_functions">github.com/ggrosnick/solarwinds_functions</a></p>

<h1 id="label-Installation">Installation</h1>

<p>Add this repository to the modules directory of your puppet environment.</p>

<p>Then add the following to your hieradata (common.yaml or other)</p>

<p>A username/password that has authorization to update Solarwinds via the
Orion API</p>

<pre class="code ruby"><code class="ruby">solarwinds_functions::config::username: &quot;&quot;
solarwinds_functions::config::password: &quot;&quot;</code></pre>

<p>The url you&#39;d like to use for querying (ex: <a
href="https://sw.yourdomain.com:17778/SolarWinds/InformationService/v3/Json/Query">sw.yourdomain.com:17778/SolarWinds/InformationService/v3/Json/Query</a>)</p>

<pre class="code ruby"><code class="ruby">solarwinds_functions::config::queryurl: &quot;&quot;</code></pre>

<p>The url you&#39;d like to use for Creating (ex: <a
href="https://sw.yourdomain.com:17778/SolarWinds/InformationService/v3/Json/Create/Orion.Nodes">sw.yourdomain.com:17778/SolarWinds/InformationService/v3/Json/Create/Orion.Nodes</a>)</p>

<pre class="code ruby"><code class="ruby">solarwinds_functions::config::addurl: &quot;&quot;</code></pre>

<p>The SNMP V2 Community String that you want to use</p>

<pre class="code ruby"><code class="ruby">solarwinds_functions::config::community: &quot;&quot;</code></pre>

<p>The SNMP V3 Details that you want to use</p>

<pre class="code ruby"><code class="ruby">solarwinds_functions::config::snmpv3username: &quot;&quot;
solarwinds_functions::config::snmpv3privmethod: &quot;&quot;
solarwinds_functions::config::snmpv3privkey: &quot;&quot;
solarwinds_functions::config::snmpv3authmethod: &quot;&quot;
solarwinds_functions::config::snmpv3authkey: &quot;&quot;</code></pre>

<p>Add the IDs of your pollers so it can pick one at random to spread the
load. This should be a comma separated single string (ex: “2,3,4,5”)</p>

<pre class="code ruby"><code class="ruby">solarwinds_functions::config::pollers: &quot;&quot;</code></pre>

<p>Finally, in a profile manifest add the following function:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_add_node_to_solarwinds'>add_node_to_solarwinds</span><span class='lparen'>(</span><span class='rparen'>)</span>
</code></pre>
</div></div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>